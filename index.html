<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>学习效率助手（简洁版）</title>
  <style>
    :root{
      --bg:#f5f7fb;
      --card:#fff;
      --text:#0a0a0a;
      --muted:#6b7280;
      --primary:#1677ff;
      --border:#e5e7eb;
      --shadow:0 8px 24px rgba(0,0,0,.06);
      --radius:14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;background:var(--bg);color:var(--text);
      font:16px/1.6 -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial;
      -webkit-font-smoothing:antialiased
    }
    .wrap{max-width:1200px;margin:24px auto;padding:0 16px}
    header{display:flex;align-items:center;gap:16px;margin-bottom:16px;flex-wrap:wrap}
    h1{margin:0;font-size:20px}
    /* 顶部导航（四个按钮） */
    .tabs{display:flex;gap:8px;flex-wrap:wrap}
    .tab{
      appearance:none;border:1px solid var(--border);background:var(--card);
      padding:8px 14px;border-radius:999px;cursor:pointer;color:#111;transition:.15s;
    }
    .tab:hover{box-shadow:var(--shadow);transform:translateY(-1px)}
    .tab.active{background:var(--primary);border-color:var(--primary);color:#fff}

    /* 页面容器 */
    .pages{margin-top:8px}
    .page{
      display:none;background:var(--card);border:1px solid var(--border);
      border-radius:var(--radius);box-shadow:var(--shadow);padding:16px;
      min-height:420px; /* 给点高度避免跳动 */
    }
    .page.active{display:block}

    /* 只是示例里的卡片样式，可删 */
    .placeholder{padding:16px;border:1px dashed var(--border);border-radius:12px;background:#fafbff;color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>学习效率助手（简洁版）</h1>
      <nav class="tabs" aria-label="主功能">
        <button class="tab" data-page="tasks">任务</button>
        <button class="tab" data-page="focus">专注</button>
        <button class="tab" data-page="notes">便签</button>
        <button class="tab" data-page="calendar">打卡日历</button>
      </nav>
    </header>

    <main class="pages">
      <!-- 任务页 -->
      <section id="page-tasks" class="page">
        <!-- 把你的「任务清单」整块 HTML 放到这里 -->
        <div class="placeholder">这里放「任务清单」页面内容</div>
      </section>

      <!-- 专注/番茄钟页 -->
      <section id="page-focus" class="page">
        <!-- 把你的「番茄钟」整块 HTML（设置/计时/开始暂停等）放到这里 -->
        <div class="placeholder">这里放「专注（番茄钟）」页面内容</div>
      </section>

      <!-- 便签页 -->
      <section id="page-notes" class="page">
        <!-- 把你的「便签」整块 HTML（文本域、保存等）放到这里 -->
        <div class="placeholder">这里放「便签」页面内容</div>
      </section>

      <!-- 打卡日历页 -->
      <section id="page-calendar" class="page">
        <!-- 把你的「日历打卡」整块 HTML（含顶部月份栏 + 日历网格 + 弹窗面板 + 对应脚本）放到这里 -->
        <div class="placeholder">这里放「打卡日历」页面内容</div>
      </section>
    </main>
  </div>

  <script>
    // —— 页面切换逻辑（hash 路由 + 记住上次页面） ——
    const TABS = Array.from(document.querySelectorAll('.tab'));
    const PAGES = {
      tasks:    document.getElementById('page-tasks'),
      focus:    document.getElementById('page-focus'),
      notes:    document.getElementById('page-notes'),
      calendar: document.getElementById('page-calendar'),
    };
    const KEY_LAST = 'app.lastPage';

    function activate(pageName){
      // 切 Tab
      TABS.forEach(btn => btn.classList.toggle('active', btn.dataset.page === pageName));
      // 切 Page
      Object.entries(PAGES).forEach(([name, el])=>{
        el.classList.toggle('active', name === pageName);
      });
      // 写 hash + 记住
      if(location.hash !== '#'+pageName) history.replaceState(null,'','#'+pageName);
      localStorage.setItem(KEY_LAST, pageName);

      // 首次进入某页时做一次性初始化（避免日历多次初始化）
      if(pageName === 'calendar' && !PAGES.calendar.dataset.inited){
        PAGES.calendar.dataset.inited = '1';
        if (typeof window.initCalendarOnce === 'function') {
          // 如果你把日历脚本封装成 initCalendarOnce()，这里调用即可
          window.initCalendarOnce();
        }
      }
    }

    // 点击导航
    TABS.forEach(btn=>{
      btn.addEventListener('click', ()=> activate(btn.dataset.page));
    });

    // 支持浏览器前进/后退
    window.addEventListener('hashchange', ()=>{
      const name = (location.hash || '').slice(1);
      if(PAGES[name]) activate(name);
    });

    // 进入页面时：hash 优先，其次记忆，最后默认“任务”
    (function boot(){
      const fromHash = (location.hash || '').slice(1);
      const last = localStorage.getItem(KEY_LAST);
      const target = PAGES[fromHash] ? fromHash : (PAGES[last] ? last : 'tasks');
      activate(target);
    })();
  </script>
</body>
</html>
